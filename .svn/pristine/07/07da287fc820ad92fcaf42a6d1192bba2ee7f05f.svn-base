package com.softserve.edu.manager;

import static org.junit.Assert.*;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.Spy;
import org.mockito.runners.MockitoJUnitRunner;

import static org.mockito.Mockito.*;

import com.softserve.edu.dao.AchievementTypeDao;
import com.softserve.edu.dao.CompetenceDao;
import com.softserve.edu.dao.GenericDaoImplementation;
import com.softserve.edu.dao.UserDao;
import com.softserve.edu.entity.AchievementType;
import com.softserve.edu.entity.Competence;
import com.softserve.edu.exception.AchievementTypeManagerException;
import com.softserve.edu.manager.AchievementTypeManager;
import com.softserve.edu.manager.AchievementTypeManagerImplementation;

/**
 * 
 * @author dmakhtc
 * 
 */
@RunWith(MockitoJUnitRunner.class)
public class AchievementTypeManagerImplTest {

	@Mock private CompetenceDao competenceDao;
	@Mock private AchievementTypeDao achievementTypeDao;
	@Mock private GenericDaoImplementation<AchievementType> genericDaoImplementation;
	@Mock private UserDao userDao;

	@InjectMocks private AchievementTypeManager achievementTypeManager = new AchievementTypeManagerImplementation();

	private AchievementType achievementType;
	private Competence competence;
	private long IdMock = 1;

	@Before 
	public void setUp() throws Exception {

		achievementType = new AchievementType();
		competence = new Competence();

	}
	

	@Test

	
	public void testCreate0() throws AchievementTypeManagerException {
		when(competenceDao.findById(Competence.class, IdMock)).thenReturn(competence);

		AchievementType achievementTypeExpected = new AchievementType().setName("Java")
				.setPoints(12).setCompetence(competence);
		achievementTypeDao.save(achievementTypeExpected);
		AchievementType achievementTypeActual = achievementTypeManager.create(
				"Java", 12, IdMock);
		assertEquals(achievementTypeExpected, achievementTypeActual);
	}

	
	public void testCreate() throws AchievementTypeManagerException {
		when(competenceDao.findById(Competence.class, IdMock)).thenReturn(competence);

		AchievementType achievementTypeExpected = new AchievementType()
				.setName("Java").setPoints(15).setCompetence(competence);
		AchievementType achievementTypeActual = achievementTypeManager.create(
				"Java", 15, IdMock);
		assertEquals("failure - not equal", achievementTypeExpected,
				achievementTypeActual); // assertNotNull("failure - should not be null",
		// competenceDao.getByID(postIdMock));
	}
	 
	@Test
	public void testAchievementTypeList() {
		achievementTypeManager.achievementTypeList();
	}

	
}